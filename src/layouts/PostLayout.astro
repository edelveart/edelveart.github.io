---
import { type BlogSchema } from "../content/config";
import BaseLayout from "./BaseLayout.astro";
import dayjs from "dayjs";
import localizedFormat from "dayjs/plugin/localizedFormat";

export interface Props extends BlogSchema {}

const { title, description, pubDate, updatedDate, badge, tags = [] } = Astro.props;
dayjs.extend(localizedFormat);
const displayDate = dayjs(pubDate).format("ll");
---

<BaseLayout title={title} description={description} , ogType="article">
  <main class="px-0 sm:px-4 md:px-0 my-[-0.25rem] flex justify-center">
    <article class="prose prose-img:mx-auto w-full max-w-[90vw] sm:max-w-[70vw] lg:max-w-[625px]">
      <!-- <main class="md:flex md:justify-center my-8"> -->
      <!-- <article class="prose prose-img:mx-auto lg:max-w-[625px] sm:max-w-[70vw]"> -->
      <!-- {
        heroImage && (
          <Image
            width={750}
            height={422}
            format="webp"
            src={heroImage}
            alt={title}
            class="w-full mb-6"
          />
        )
      } -->
      <h1 class="title my-6 text-3xl font-bold break-words"># {title}</h1>
      <div class="border-l-4 border-secondary pl-4 py-2">
        {pubDate && <time class="text-lg">{displayDate}</time>}
        <br />
        <div class="ml-[-8px] gap-2 flex flex-wrap mt-2">
          {badge && <div class="ml-2 badge badge-secondary rounded-md p-3 mb-2">{badge}</div>}
          {
            tags &&
              tags.map((tag) => (
                <a
                  href={`/blog/tag/${tag}`}
                  class="badge badge-outline badge-sm text-sm rounded-md p-3 hover:badge-secondary ease-in-out duration-200 hover:bg-inherit no-underline"
                >
                  {tag}
                </a>
              ))
          }
          {
            updatedDate && (
              <div class="">
                {" "}
                Last updated on <time>{updatedDate}</time>{" "}
              </div>
            )
          }
        </div>
      </div>

      <!-- <div class="divider my-5"></div> -->
      <slot />
    </article>
  </main>
</BaseLayout>

<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML"
></script>

<script type="text/x-mathjax-config">
  if (window.MathJax) {
    MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
  }
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"],
      ],
      processEscapes: true,
    },
    jax: ["input/TeX", "input/MathML", "input/AsciiMath", "output/CommonHTML"],
    extensions: [
      "tex2jax.js",
      "mml2jax.js",
      "asciimath2jax.js",
      "MathMenu.js",
      "MathZoom.js",
      "AssistiveMML.js",
      "[Contrib]/a11y/accessibility-menu.js",
    ],
    TeX: {
      extensions: ["AMSmath.js", "AMSsymbols.js", "noErrors.js", "noUndefined.js"],
      equationNumbers: {
        autoNumber: "AMS",
      },
    },
  });
</script>
